<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>SoundCloud Jukebox</title>
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="styles.css">
    <!-- font awesome library-->
    <link href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" rel="stylesheet">
    <!-- Javascript Page -->
    <!--<script src="function.js" type="text/javascript"></script>-->
    <!-- jQuery Library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- SoundCloud API reference -->
    <script src="https://connect.soundcloud.com/sdk/sdk-3.3.0.js"></script>
    <script>
    SC.initialize({
        client_id: 'f665fc458615b821cdf1a26b6d1657f6',
        redirect_uri: 'http://example.com/callback'
    });
    </script>
</head>

<body>
    <!-- CSS Sheet-->
    <style type="text/css">

    </style>
    <header>
        <div class="welcome">
            <img src="http://moziru.com/images/fluffy-clipart-cloud-transparent-3.jpg">
            <div id="Funcbtns">
                <h1>
                Sound Cloud - <strong>a soundcloud streaming Site </strong>
            </h1>
            </div>
    </header>
    <div class="searchbar">
        <input type="text" id="input" placeholder="song, artist, album...">
    </div>
    <div class="button-obj">
        <button class="searchbutton" onclick="jukebox.search();">Search Trackname</button>
        <button class="searchbutton2" onclick="jukebox.searchgenre();">Search by Genre</button>
        <button class="searchbutton3" onclick="jukebox.searchtrackid();">Search by Track ID</button>
    </div>
    <button id="play" onclick="jukebox.play();">Play</button>
    <button id="pause" onclick="jukebox.pause();" ">Pause</button>
    <button id="stop " onclick="jukebox.stop(); "">Stop</button>
    </div>
    <div id="results-container">
        <div id="results-box">
            <p id="results-description">
                <strong> Search Results</strong>
            </p>
        </div>
        <!--<img src="">-->
    </div>
    <script type="text/javascript">
    //var initialize = function initialize() {
    //    SC.initialize({
    //        client_id: f665fc458615b821cdf1a26b6d1657f6
    //    })
    //};
    var searchterm = null;
    var musicobject;
    jukebox = {
        search: function() {
            var searchterm = document.getElementById("input").value;
            SC.get("/tracks", {
                q: searchterm
            }).then(function(response) {
                    musicobject = response;

                    for (i = 0; i < musicobject.length; i++) {
                        console.log("hello");
                        console.log(musicobject[i]);
                        console.log(musicobject[i].id);
                        console.log(musicobject[i].title);
                        var trackid = musicobject[i].id;
                        trackname = musicobject[i].title;
                        var para = document.createElement('p');
                        var songinfo = document.createTextNode(trackname + ", " + trackid);
                        para.appendChild(songinfo);
                        if (createdp == true) {
                            var link = document.createElement('a');
                            var linkText = songinfo;
                            link.appendChild(linkText);
                            link.title = "songinfo";
                            link.href = "";
                            link.appendChild(songinfo);
                            document.getElementById("results-box").appendChild(link)
                        }
                        var createdp = document.getElementById("results-box").appendChild(para);
                        
                    }
                    //console.log(musicobject[i].id)
                }
                //document.getElementById("results-description").innerHTML = musicobject[0].id;
                //musicobject = response;
                //console.log(musicobject[i].id);
                //console.log(response);

            );
        },
        searchgenre: function() {
            var searchterm = document.getElementById("input").value;
            SC.get("/tracks", {
                q: searchterm
            }).then(function(response) {
                    musicobject = response;

                    for (i = 0; i < musicobject.length; i++) {
                        console.log("hello");
                        //console.log(musicobject[i]);
                        console.log(musicobject[i].id);
                        //console.log(musicobject[i].title);
                        console.log(musicobject[i].genre);
                        var trackid = musicobject[i].id;
                        trackname = musicobject[i].title;
                        genre = musicobject[i].genre;
                        var para = document.createElement('p');
                        var songgenre = document.createTextNode(genre + ", " + trackid + ", " + trackname);
                        para.appendChild(songgenre);
                        document.getElementById("results-box").appendChild(para);
                    }
                    //console.log(musicobject[i].id)
                }
                //document.getElementById("results-description").innerHTML = musicobject[0].id;
                //musicobject = response;
                //console.log(musicobject[i].id);
                //console.log(response);

            );
        },
        searchtrackid: function() {
            var searchterm = document.getElementById("input").value;
            SC.get("/tracks"+searchterm, {
                q: searchterm
            }).then(function(response) {
                    musicobject = response;

                    for (i = 0; i < musicobject.length; i++) {
                        console.log("hello");
                        console.log(musicobject[i]);
                        console.log(musicobject[i].id);
                        console.log(musicobject[i].title);
                        var trackid = musicobject[i].id;
                        trackname = musicobject[i].title;
                        var para = document.createElement('p');
                        var songinfo = document.createTextNode(trackid + ", " + trackname);
                        para.appendChild(songinfo);
                        document.getElementById("results-box").appendChild(para);

                    }
                    //console.log(musicobject[i].id)
                }
                //document.getElementById("results-description").innerHTML = musicobject[0].id;
                //musicobject = response;
                //console.log(musicobject[i].id);
                //console.log(response);

            );
        },


        returnresults: function() {
            //document.getElementById("returnresults").innerHTML =
            for (i = 0; i <= musicobject.length; i++) {
                document.getElementById("returnresults").innerHTML =
                    musicobject[i].title;
            }
        },

        play: function() {

            SC.stream('/tracks/' + trackid).then(function(player) {
                player.play();
            })
        }
    }
    </script>
</body>

</html>